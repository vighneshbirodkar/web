date mon nov gmt server ncsa content type text html last modified thu may gmt content length cs quiz university wisconsin madison computer sciences department cs spring bart miller quiz wednesday may file systems recovery updating file system information disk writing new block file three disk things need updated new block file contains data written disk block free list inode file descriptor order must operations done able safely recover system crash get disk block free list write data block update inode recovering crash operating system crashes often leaves data stores disk inconsistent state inconsistent state mean file system data structures correctly describe files directories descriptors free lists happen takes several disk reads writes update file inodes file descriptors free list remember multiple processes users updating files time interval operating system rebooted necessary validate file system data structures right figure fix allocation scheme based block groups free block bit map used demos possible tell crash block marked free bit map first removed block bitmap question know block marked free really free block want double check make sure system behaving properly could following recovery algorithm system rebooted create new bit map memory indicates blocks free start root directory traverse file system tree descriptor record new bit map disk blocks allocated descriptor compare new bit map one disk show files bit map files bit map see last step tell blocks really free allocated file crash suppose know disk block appears free list map file action could safely take e want make matters worse would like make better block occurs free list one file usually safe take free list keep file block somehow appeared multiple files e pointed multiple inodes d manually try fix problem last modified thu may cdt bart